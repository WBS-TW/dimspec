<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Mass Spectral Quality Control (MSQC) | User Guide for the NIST Database Infrastructure for Mass Spectrometry (DIMSpec) Tool Set</title>
  <meta name="description" content="This is the User Guide distributed alongside the R Project containing the toolset supporting the “Database Infrastructure for Mass Spectrometry (DIMSpec)” project." />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="Mass Spectral Quality Control (MSQC) | User Guide for the NIST Database Infrastructure for Mass Spectrometry (DIMSpec) Tool Set" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/assets/fig00-02_dimspec_conceptual_graphic.png" />
  <meta property="og:description" content="This is the User Guide distributed alongside the R Project containing the toolset supporting the “Database Infrastructure for Mass Spectrometry (DIMSpec)” project." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Mass Spectral Quality Control (MSQC) | User Guide for the NIST Database Infrastructure for Mass Spectrometry (DIMSpec) Tool Set" />
  
  <meta name="twitter:description" content="This is the User Guide distributed alongside the R Project containing the toolset supporting the “Database Infrastructure for Mass Spectrometry (DIMSpec)” project." />
  <meta name="twitter:image" content="/assets/fig00-02_dimspec_conceptual_graphic.png" />

<meta name="author" content="Jared M. Ragland and Benjamin J. Place" />


<meta name="date" content="2023-03-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="table-explorer-home.html"/>
<link rel="next" href="msmatch-home.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/font-awesome-5.15.3/css/all.min.css" rel="stylesheet" />
<link href="libs/font-awesome-5.15.3/css/v4-shims.min.css" rel="stylesheet" />
<!-- Insert NIST header and footer -->
  <link rel="stylesheet" href="https://pages.nist.gov/nist-header-footer/css/nist-combined.css" />
  <!-- The live updating version is preferrable, but it causes race conditions in the DOM with auto formatting based on whether or not the NIST header/footer can be loaded. That script has been recreated here with the proper modifications to override gitbook CSS with the NIST header styling; see below.
    <script src="https://pages.nist.gov/nist-header-footer/js/nist-header-footer.js" type="text/javascript" defer="defer"></script>
  -->
  <!-- Project already includes jQuery 3.6 as part of gitbook -->
  <!-- <script src="https://code.jquery.com/jquery-3.6.2.min.js" type="text/javascript" defer="defer"></script> -->
  <!-- Insert NIST leave notice -->
  <!-- Project already includes jQuery 3.6 as part of gitbook -->
  <!-- <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js"></script> -->
  <script type="text/javascript" src="https://pages.nist.gov/leaveNotice/js/jquery.leaveNotice-nist.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://pages.nist.gov/leaveNotice/css/jquery.leaveNotice.css" />
  <script type="text/javascript" defer="defer">
    $(document).ready(function(){
      var divider = $('<li class="divider"></li>');
      var online_user_guide_link = $('<li><a href="https://pages.nist.gov/dimspec/docs/index.html" target="_blank"><i class="fa fa-bookmark"></i><p style="display: inline; font-weight: bold;">&nbsp&nbspOnline Version</p></a>');
      var nist_pao_privacy_link = $('<li><a href="http://www.nist.gov/public_affairs/privacy.cfm#privpolicy" target="_blank"><i class="fa fa-info-circle"></i><p style="display: inline;">&nbsp&nbspSite Privacy</p></a>');
      var nist_disclaimers_link = $('<li><a href="https://www.nist.gov/disclaimer" target="_blank"><i class="fa fa-info-circle"></i><p style="display: inline;">&nbsp&nbspDisclaimers</p></a>');
      var nist_pfas_program = $('<li><a href="https://www.nist.gov/programs-projects/and-polyfluoroalkyl-substances-pfas/research/reference-data-and-tools" target="_blank"><i class="fa fa-info-circle"></i><p style="display: inline;">&nbsp&nbspNIST PFAS Program - Tools</p></a>');
      $("body").prepend('<div id="nistheadergoeshere"></div>');
      $(".summary").append(divider);
      $.ajax({
        url: "https://pages.nist.gov/nist-header-footer/boilerplate-header.html",
        cache: false,
        dataType: "html"
      })
      .done(function (data) {
        $('#nistheadergoeshere').append(data);
        // Mark external (non-nist.gov) A tags with class "external"
        // If the adress start with https and ends with nist.gov
        var re_nist = new RegExp('^https?:\/\/((^\/)*\.)*nist\\.gov(\/|$)'); 
        // Regex to find address that start with https 
        var re_absolute_address = new RegExp('^((https?:)?\/\/)');
        $("a").each(function(){
          var url=$(this).attr('href'); 
          if(re_nist.test(url) || !re_absolute_address.test(url)){
            $(this).addClass('local'); 
          }else{
            $(this).addClass('external');
          } 
        });
        // Add leaveNotice to external A elements 
        $('a.external').leaveNotice({
          siteName: 'the DIMSpec User Guide',
        });
        // Add proper markings for NIST footer placement at bottom of page
        $("html").addClass('nist-footer-bottom');
        $("body").attr('id', 'main');
        // Hide the NIST logo, which is displayed on local copies lacking the NIST header and footer.
        $("#nist-logo-link").hide();
        // Set the background of the gitbook header to match that of the NIST header.
        $(".book-header").addClass("nist-style-header");
        var more_styles = $("<style>.nist-style-header { background-color: " + $("#nist-header").css("background-color") + " !important; }</style>");
        $("html > head").append(more_styles);
        $(".summary").append(nist_pfas_program);
        $(".summary").append(nist_pao_privacy_link);
        $(".summary").append(nist_disclaimers_link);
      })
      .fail(function() {
        // The gitbook search tool does not work when launched locally as it is not using a web server.
        $(".js-toolbar-action[aria-label='Search']").remove();
        $(".summary").append(online_user_guide_link);
        $(".summary").append(nist_pfas_program);
        $(".summary").append(nist_disclaimers_link);
      });
      $("body").append('<div id="nistfootergoeshere"></div>');
      $.ajax({
        url: "https://pages.nist.gov/nist-header-footer/boilerplate-footer.html",
        cache: false,
        dataType: "html"
      })
      .done(function (data) {
        $('#nistfootergoeshere').append(data);
      });
    });
  </script>
<!-- Insert NIST GA, uncomment the next line to activate.  -->
  <script async type="text/javascript" id="_fed_an_ua_tag" src="https://dap.digitalgov.gov/Universal-Federated-Analytics-Min.js?agency=NIST&subagency=github&pua=UA-66610693-1&yt=true&exts=ppsx,pps,f90,sch,rtf,wrl,txz,m1v,xlsm,msi,xsd,f,tif,eps,mpg,xml,pl,xlt,c"></script>
<!--
  Use this file to address any browser compatibility or accessibility adjustments neccessary.
  Opening locally (and likely hosted) throws several errors and warnings in DevTools
  Last assessed 2023-03-14 by jared.ragland@nist.gov using MS Edge DevTools: 65 warnings and 7 errors.
  The majority of these issues were not easily fixable and stemmed from either CORS issues or gitbook styling rules.
-->
<!-- Accessibility -->
<script type="text/javascript">
  $(document).ready(function() {
    // No lanugage attribute is set on the html element by default.
    $("html").attr("lang", "en");
    $("html").attr("xml:lang", "en");
    // Default icon role is "presentation" which is not recognized as a valid role.
    $("#preface > p > i").attr("role", "img");
    $("div.buttons > button").each(function(){
      $(this).attr("type", "button");
    });
  })
</script>
<!-- Compatibility
  Errors (15x) included unrecognized CSS, primarily inclusion of the deprecated "-ms-*" rules. These stem from gitbook-2.6.7/css/style.css and will not be overridden as they are largely inapplicable as they are inclusion of additional rules for other browser.
  Flagged gitbook style rules (5x) included: -ms-filter, -ms-text-size-adjust, -webkit-text-size-adjust, test-size-adjust, -webkit-overflow-scrolling, -webkit-tap-highlight-color, orphans, widows.
  Flagged font-awesome header issues (2x) included: 'content-type' should be 'font/woff' not 'application/font-woff'
-->
<!-- Security
  Errors (2x) from CORS, resulting when the local version tries to include the hosted NIST header footer files. Inserting locally would somewhat fix these but make things more static. In this case, given the size of the NIST footer, it was decided to let this fail behind the scenes and render from the locally cached version of the User Guide as the tool may be used off-network in support of analytical laboratory operations. These should not be an issue with the hosted version.
  Errors (32x) CORS-related cookie errors, see above.
-->
<!-- Other
  Flagged MathJax (imported by gitbook) style rules (2x) included: 'border-radius' and 'box-shadow' being listed before '-khtml-border-radius' and '-khtml-box-shadow'.
  Flagged gitbook style rules (2x) included: 'box-sizing' and 'text-size-adjust' being listed before '-webkit-box-sizing' and '-moz-text-size-adjust'
  Flagged javascript (1x) from gitbook included use of navigator.platform.
  Deprecated Feature "Expect-CT header" which wasn't found in a sources search but continues to show up in the Issues list.
-->


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="part" id="book-links">
    <a id="nist-logo-link" href="https://www.nist.gov"><img id="nist-logo-svg" src="assets/NIST-Logo-Brand-White.svg" target="_blank" title="NIST logo"></img></a>
    <h3 id="gitbook-title">
        <a id="github-link" href="https://github.com/usnistgov/dimspec" target="_blank">A Database Infrastructure for Mass Spectrometry (DIMSpec)  <i class="fab fa-github"></i></a>
    </h3>
</li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="part"><span><b>DIMSpec User Guide</b></span></li>
<li class="chapter" data-level="" data-path="intro-start.html"><a href="intro-start.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="intro-start.html"><a href="intro-start.html#intro-contributors"><i class="fa fa-check"></i>Contributors</a></li>
<li class="chapter" data-level="" data-path="intro-start.html"><a href="intro-start.html#intro-contributing"><i class="fa fa-check"></i>Contributing</a></li>
<li class="chapter" data-level="" data-path="intro-start.html"><a href="intro-start.html#intro-about"><i class="fa fa-check"></i>About this Book</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="instructions.html"><a href="instructions.html"><i class="fa fa-check"></i>Instructions</a>
<ul>
<li class="chapter" data-level="" data-path="instructions.html"><a href="instructions.html#installation"><i class="fa fa-check"></i>Installation</a></li>
<li class="chapter" data-level="" data-path="instructions.html"><a href="instructions.html#project-directory"><i class="fa fa-check"></i>Project Directory</a></li>
<li class="chapter" data-level="" data-path="instructions.html"><a href="instructions.html#project-set-up"><i class="fa fa-check"></i>Project Set Up</a></li>
<li class="chapter" data-level="" data-path="instructions.html"><a href="instructions.html#using-dimspec"><i class="fa fa-check"></i>Using DIMSpec</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="technical-details.html"><a href="technical-details.html"><i class="fa fa-check"></i>Technical Details</a>
<ul>
<li class="chapter" data-level="" data-path="technical-details.html"><a href="technical-details.html#database-schema"><i class="fa fa-check"></i>Database Schema</a></li>
<li class="chapter" data-level="" data-path="technical-details.html"><a href="technical-details.html#populating-data-at-build"><i class="fa fa-check"></i>Populating Data at Build</a></li>
<li class="chapter" data-level="" data-path="technical-details.html"><a href="technical-details.html#compute-environments"><i class="fa fa-check"></i>Compute Environments</a></li>
<li class="chapter" data-level="" data-path="technical-details.html"><a href="technical-details.html#shiny-applications"><i class="fa fa-check"></i>Shiny Applications</a></li>
<li class="chapter" data-level="" data-path="technical-details.html"><a href="technical-details.html#logger"><i class="fa fa-check"></i>Logger</a></li>
<li class="chapter" data-level="" data-path="technical-details.html"><a href="technical-details.html#plumber"><i class="fa fa-check"></i>Plumber</a></li>
<li class="chapter" data-level="" data-path="technical-details.html"><a href="technical-details.html#python"><i class="fa fa-check"></i>Python</a></li>
<li class="chapter" data-level="" data-path="technical-details.html"><a href="technical-details.html#importing-data-td"><i class="fa fa-check"></i>Importing Data</a></li>
<li class="chapter" data-level="" data-path="technical-details.html"><a href="technical-details.html#future-development"><i class="fa fa-check"></i>Future Development</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="conclusions.html"><a href="conclusions.html"><i class="fa fa-check"></i>Conclusions</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="part"><span><b>Shiny Web Applications</b></span></li>
<li class="chapter" data-level="" data-path="table-explorer-home.html"><a href="table-explorer-home.html"><i class="fa fa-check"></i>Table Explorer</a>
<ul>
<li class="chapter" data-level="" data-path="table-explorer-home.html"><a href="table-explorer-home.html#table-explorer-table-viewer"><i class="fa fa-check"></i>Table Viewer</a></li>
<li class="chapter" data-level="" data-path="table-explorer-home.html"><a href="table-explorer-home.html#table-explorer-erd"><i class="fa fa-check"></i>Entity Relationship Diagram</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="msqc-home.html"><a href="msqc-home.html"><i class="fa fa-check"></i>Mass Spectral Quality Control (MSQC)</a>
<ul>
<li class="chapter" data-level="" data-path="msqc-home.html"><a href="msqc-home.html#msqc-intro"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="msqc-home.html"><a href="msqc-home.html#msqc-instructions"><i class="fa fa-check"></i>Instructions</a></li>
<li class="chapter" data-level="" data-path="msqc-home.html"><a href="msqc-home.html#msqc-technical-details"><i class="fa fa-check"></i>Technical Details</a></li>
<li class="chapter" data-level="" data-path="msqc-home.html"><a href="msqc-home.html#msqc-conclusions"><i class="fa fa-check"></i>Conclusions</a></li>
<li class="chapter" data-level="" data-path="msqc-home.html"><a href="msqc-home.html#msqc-appendices"><i class="fa fa-check"></i>Appendices</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="msmatch-home.html"><a href="msmatch-home.html"><i class="fa fa-check"></i>Mass Spectral Match (MSMatch)</a>
<ul>
<li class="chapter" data-level="" data-path="msmatch-home.html"><a href="msmatch-home.html#msmatch-intro"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="msmatch-home.html"><a href="msmatch-home.html#msmatch-instructions"><i class="fa fa-check"></i>Instructions</a></li>
<li class="chapter" data-level="" data-path="msmatch-home.html"><a href="msmatch-home.html#msmatch-technical-details"><i class="fa fa-check"></i>Technical Details</a></li>
<li class="chapter" data-level="" data-path="msmatch-home.html"><a href="msmatch-home.html#msmatch-conclusions"><i class="fa fa-check"></i>Conclusions</a></li>
</ul></li>
<li class="appendix"><span><b>Appendices</b></span></li>
<li class="chapter" data-level="" data-path="appendix-function-reference.html"><a href="appendix-function-reference.html"><i class="fa fa-check"></i>Function Reference</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="_blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">User Guide for the NIST Database Infrastructure for Mass Spectrometry (DIMSpec) Tool Set</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="msqc-home" class="section level1 unnumbered hasAnchor">
<h1>Mass Spectral Quality Control (MSQC)<a href="msqc-home.html#msqc-home" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="msqc-intro" class="section level2 unnumbered hasAnchor">
<h2>Introduction<a href="msqc-home.html#msqc-intro" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>One goal of the Data Infrastructure for Mass Spectrometry (DIMSpec) project is to provide a database that can be easily retasked to support individual projects within the Chemical Sciences Division to manage data coherently and accelerate analyte identification, screening, and annotation processes for non-targeted analysis projects. Databases built and managed with DIMSpec are SQLite files used within a distributed R Project. A DIMSpec mass spectral database incorporates empirical mass spectral data from analytical standards and complex mixtures with relevant analytical method metadata and mass spectral annotation. Algorithms have been developed in R to validate the quality of new experimental data.</p>
<p>For ease of use, the Mass Spectral Quality Control (MSQC) application was developed that incorporates the R functions into a R/Shiny application. Scripts for automated setup are included. For this initial release, DIMSpec is distributed with data populated for per- and polyfluorinated alkyl substances (PFAS); that effort has been primarily supported by the Department of Defense Strategic Environmental Research and Development Program (<a href="https://serdp-estcp.org/" target="_blank">DOD-SERDP</a>), project number <a href="https://www.serdp-estcp.org/projects/details/a0bb4198-02cd-44b9-9e73-9ef916e7f7e0/er20-1056-project-overview" target="_blank">ER20-1056</a>.</p>
</div>
<div id="msqc-instructions" class="section level2 unnumbered hasAnchor">
<h2>Instructions<a href="msqc-home.html#msqc-instructions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The MSQC application installs alongside DIMSpec. If there is continued (or expanded) interest, the project could be turned into an R package installable directly from GitHub with additional development or this tool can be deployed to a shiny server for use by those connected to the NIST network without the need for launching or maintaining it locally. For now, this application is distributed for demonstration and evaluation with an implementation of NIST DIMSpec containing high resolution accurate mass spectrometry data for per- and polyfluorinated alkyl substances (PFAS). The R project can be opened in <a href="https://www.rstudio.com/" target="_blank">RStudio</a><a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> which may be downloaded and installed free of charge if not already installed. Initial set up does require an internet connection to install dependencies; on a system which does not contain any software components this can take a considerable amount of time.</p>
<p>Refer to the <a href="instructions.html#system-requirements">System Requirements</a> section for installation details.</p>
<div id="msqc-input-format" class="section level3 unnumbered hasAnchor">
<h3>Input File Format Requirements<a href="msqc-home.html#msqc-input-format" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To use MSQC, raw data files produced by a mass spectrometer must be converted into mzML format <span class="citation">(<a href="#ref-deutsch_mass_2010" role="doc-biblioref">Deutsch 2010</a>)</span> using <a href="https://proteowizard.sourceforge.io/" target="_blank">Proteowizard’s</a> msConvert software <span class="citation">(<a href="#ref-adusumilli_data_2017" role="doc-biblioref">Adusumilli, Ravali and Mallick, Parag 2017</a>)</span>. There are specific parameters that must be used during conversion.</p>
<pre><code>Filter: Threshold peak filter
Threshold type: absolute
Orientation: most intense
Value: 1
Filter: Peak picking
Algorithm: vendor
MS levels: 1-2</code></pre>
<p>A more detailed user guide for converting the files is provided as a <a href="assets/file_convert.pdf" target="_blank">vignette</a>.</p>
</div>
<div id="msqc-ntamrt" class="section level3 unnumbered hasAnchor">
<h3>Non-Targeted Analysis Method Reporting Tool<a href="msqc-home.html#msqc-ntamrt" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A macro-enabled Microsoft Excel workbook, called the Non-Targeted Analysis Method Reporting Tool (NTA-MRT), is used for the systematic collection of sample, method, and compound information related to chemicals identified in a sample. The most up-to-date version of NTA-MRT is publicly available at <a href="https://github.com/usnistgov/NISTPFAS/tree/main/methodreportingtool" target="_blank">GitHub</a>.</p>
<p>The instructions for completing the NTA-MRT are contained within the tool itself. In order to use the MSQC application, a <code>sample.JSON</code> file must be generated using the “Export to JSON file output” button on the first tab of the NTA-MRT.</p>
<caption>
The file name entered in the NTA-MRT under the Sample tab must exactly match (case-sensitive) the paired mzML file name to be used for the MSQC.
</caption>
</div>
<div id="msqc-launching-msqc" class="section level3 unnumbered hasAnchor">
<h3>Launching MSQC<a href="msqc-home.html#msqc-launching-msqc" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Launch this tool similarly to other “shiny”-based tools as part of DIMSpec. In brief, this can be done from a terminal or the R console, though the preferred method is to use RStudio <span class="citation">(<a href="#ref-RStudio" role="doc-biblioref">RStudio Team 2020</a>)</span>. The following commands are typical given an existing installation of R or RStudio and should always be run from the project directory. The shiny package <span class="citation">(<a href="#ref-R-shiny" role="doc-biblioref">Chang et al. 2021</a>)</span> and other necessary R packages will be installed if it not already available by running the script at <code>R/compliance.R</code>, but shiny is the only package required to start the application. When first run, it may take a moment to install necessary dependencies and launch the application programming interface (API) server.</p>
<p><em>Terminal</em><a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a></p>
<blockquote>
<p>R.exe “shiny::runApp(‘inst/apps/msqc’)”</p>
</blockquote>
<p><em>R console</em></p>
<blockquote>
<p><code>shiny::runApp(‘inst/apps/msqc’)</code></p>
</blockquote>
<p><em>RStudio</em></p>
<blockquote>
<p>Open the “.Rproj” project file in RStudio, navigate to the “inst/apps/spectral_match” directory, open one of the “global.R,” “server.R,” or “ui.R” files, and click the “Run App” button. Files open in an RStudio project will remain open by default when RStudio is closed, allowing users to quickly relaunch by simply loading the project. For best performance, ensure “Run External” is selected from the menu “carrot” on the right to launch the application in your system’s default web browser. This application has been tested on Chrome, Edge, and Firefox.</p>
</blockquote>
<p>Alternatively, once the compliance script has been executed MSMatch can be launched using <code>start_app("msqc")</code>.</p>
<p>Once launched the API server will remain active until stopped, allowing users to freely launch, close, and relaunch any shiny apps dependent upon it much more quickly. The application is fluid and will dynamically resize to fit the dimensions of a browser window. By default, the server does not stop when the browser is closed. This means that, once started, it is available by navigating a web browser back to the URL where it launched until the server is shut down.</p>
<p>If anything is needed from the user, interactive feedback will occur in the console from which it was launched. Install any packages required if prompted by the application. Once the package environment requirements have been satisfied and the server has spun up, which may take a moment, the tool will launch and display the “About” screen (<a href="msqc-home.html#fig05-01">Figure 1</a>) either in the RStudio viewer or the browser. The navigation panel on the left will control which page is currently being viewed; click an entry to navigate to that page.</p>
<p>While this version of DIMSpec includes analytical data for PFAS, MSQC can be tailored for any given database name. See <a href="msqc-home.html#msqc-technical-details">Technical Details</a>&gt;<a href="msqc-home.html#msqc-application-settings">Application Settings</a> for customization options.</p>
<div class="figure">
<img src="assets/fig05-01_msqc_landing_page.png" title="Figure 1. The home page for the MSQC web application contains basic information about the application and can be tailored easiliy for each use case." id="fig05-01" style="width:100.0%" alt="" />
<p class="caption">Figure 1. The home page for the MSQC web application contains basic information about the application and can be tailored easiliy for each use case.</p>
</div>
</div>
<div id="msqc-using-msqc" class="section level3 unnumbered hasAnchor">
<h3>Using MSQC<a href="msqc-home.html#msqc-using-msqc" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Every effort has been made to make using the MSQC application as intuitive to use as possible. Generally the user interface will adjust to the current needs and highlight the next step. Some steps (e.g. 2 and 3) can be used interchangeably.</p>
<div id="msqc-step0" class="section level4 unnumbered hasAnchor">
<h4>Step 0 - Modify quality control settings (optional)<a href="msqc-home.html#msqc-step0" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Prior to file processing, verify or set parameters to be used for quality control analysis can be modified. On the left menu, select “QC Settings” to navigate to the settings dashboard shown in <a href="msqc-home.html#fig05-02">Figure 2</a>. The default settings are recommended, but can be modified if needed.</p>
<div class="figure">
<img src="assets/fig05-02_msqc_settings.png" title="Figure 2. The QC Settings window that has settings that can be adjusted for quality control analysis, the uncertainty mass spectrum settings are described in Place 2021." id="fig05-02" style="width:50.0%" alt="" />
<p class="caption">Figure 2. The QC Settings window that has settings that can be adjusted for quality control analysis, the uncertainty mass spectrum settings are described in Place 2021.</p>
</div>
</div>
<div id="msqc-step1" class="section level4 unnumbered hasAnchor">
<h4>Step 1 - Import mzML and Sample JSON Files<a href="msqc-home.html#msqc-step1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Upload paired mzML and sample JSON files (conventionally named “filename_mzml_sample.JSON” by the NTA-MRT macros). First, select “Data Import” on the left menu or the “Click Here to get Started” button from the “About” page to bring up the Data Import page <a href="msqc-home.html#fig05-03">Figure 3</a>. Multiple files may be uploaded; the limit of number and size of files is dependent on system memory. By default the maximum size of a single file is 250 MB, but this limit can be increased by changing the setting of <code>file_MB_limit</code> in the <code>global.R</code> file.</p>
<p>First, load the mzML files of interest using the top “Load” button or by dragging the data file(s) to the input widget labeled <em>1) Load raw mzML file(s)</em>.</p>
<p>Second, load the paired sample JSON files using the second “Load” button or by dragging the JSON file(s) to the input widget labeled <em>2) Load Sample JSON file(s)</em>. The sample JSON files do not need to be selected in the same order as the mzML files and will be matched by name when processed.</p>
<div class="figure">
<img src="assets/fig05-03_data_import.png" title="Figure 3. The data import page of MSQC where data files, experiment parameters, and features of interest are identified. Workflow guidance options become available once data are provided." id="fig05-03" style="width:67.0%" alt="" />
<p class="caption">Figure 3. The data import page of MSQC where data files, experiment parameters, and features of interest are identified. Workflow guidance options become available once data are provided.</p>
</div>
<p>Once mzML and Sample JSON files are uploaded, the application will automatically check to see if there are valid pairs of mzML and Sample JSON files. A successful upload will give a screen similar to <a href="msqc-home.html#fig05-04">Figure 4</a>. If multiple files are loaded, only files with verified matches will be included in the table and available for further processing.</p>
<div class="figure">
<img src="assets/fig05-04_data_input_files_uploaded.png" id="fig05-04" style="width:100.0%" alt="" />
<p class="caption">Figure 4. The data import page after data files have been loaded.</p>
</div>
</div>
<div id="msqc-step2" class="section level4 unnumbered hasAnchor">
<h4>Step 2 - Process Data<a href="msqc-home.html#msqc-step2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>After files have been loaded and matched, a button will appear on the “Data Import” window that is labeled “Process Data”. Click the “Process Data” button and it will sequentially process each mzML file. This can take up to 5 minutes per raw file depending on the number of compounds per file, so a large number of files may take a long time to process. Progress indicators are provided. Once complete, the text under “QC Data Import Status” will read: “Data processing complete.”</p>
<p>If a raw file does not have a valid Sample JSON, the files can still be processed, but the invalid rows will be excluded.</p>
</div>
<div id="msqc-step3" class="section level4 unnumbered hasAnchor">
<h4>Step 3 - Review QC Results<a href="msqc-home.html#msqc-step3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Once processed, the QC results can be reviewed by selecing “Quality Review” in the left menu or clicking the “Quality Review” button that appears below the “Process Data” button.</p>
<p>The top table, which is the only visible table when starting a new review, shows the raw files that have been processed and the respective quality control check results (“PassCheck”). If all compounds in the raw file passed all QC checks, the PassCheck result will be true. If any compound in the raw file failed any of the QC checks, the PassCheck result will be false.</p>
<p>To review the compounds within a single raw file, select the row of the raw file you want to review in the table labeled <em>1) Click a row to select an mzML file</em>. This will display a second table of all compounds within the selected raw file. The PassCheck result for each compound is displayed in this table. If all QC checks for each compound in the raw file passed all QC checks, the PassCheck result will be true for that compound. If a compound in the raw file failed any of the QC checks, the PassCheck result will be false for that compound.</p>
<p>To review the individual QC checks (described in the <a href="msqc-home.html#msqc-technical-details">Technical Details</a>&gt;<a href="msqc-home.html#msqc-quality-control-evaluation">Quality Control Evaluation</a> section), select a row for the peak to review in the table labeled <em>2) Click a row to see metrics for that peak</em>. This will display boxes to the right containing all QC checks for that compound. Expand a specific QC check by clicking on the box header to display the results of the QC check as a table. An example view of the quality control review page is shown in <a href="msqc-home.html#fig05-05">Figure 5</a>. A note below the two tables on the left will indicate whether any QC checks failed.</p>
<div class="figure">
<img src="assets/fig05-05_qc_review.png" title="Figure 5. Screenshot of the quality review page with both an mzML file and a peak object selected." id="fig05-05" style="width:100.0%" alt="" />
<p class="caption">Figure 5. Screenshot of the quality review page with both an mzML file and a peak object selected.</p>
</div>
</div>
<div id="msqc-step4" class="section level4 unnumbered hasAnchor">
<h4>Step 4 - Export Data<a href="msqc-home.html#msqc-step4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Once data are processed, all data can be exported (regardless of quality review status) by selecting “Export Data” in the left menu. Additional options may be added in the future to refine the export process such as selecting only peaks and files that pass all defined quality checks.</p>
<p>Clicking the button labeled “Export all data”, will write the peak JSON files and download them in a single .zip file. This file can be unzipped and the peak JSONs can be directly incorporated into the DIMSpec database using the import routine described in the <a href="instructions.html#importing-data">Importing Data</a> section.</p>
</div>
<div id="msqc-step5" class="section level4 unnumbered hasAnchor">
<h4>Step 5 - Closing Down<a href="msqc-home.html#msqc-step5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>When finished using the application, typing the escape key at the R console is the simplest way to stop the server and exit the application. If using RStudio there is a “stop sign” button at the top right of the console pane that will also stop it. When finished completely with the project, users also need to shut down the API server.</p>
<ul>
<li>Loading the entire project from the compliance script (i.e. MSMatch was launched using <code>start_app("spectral_match")</code>) provides additional actions and includes a live database connection with the ability to read data into tables and preserve them for further analysis. Use the function <a href="appendix-function-reference.html#fn_def_close_up_shop"><code>close_up_shop()</code></a> with the argument <code>back_up_connected_tbls</code> set to <code>TRUE</code> to preserve these, or the default FALSE to simply close all connections including the API server).</li>
<li>If launching the app directly and using the default settings there will be a session object named <code>plumber_service</code> connected to that server. To stop it, use the <a href="appendix-function-reference.html#fn_def_api_stop"><code>api_stop</code></a> function from the console or stop the service directly using <code>plumber_service\$kill()</code>; it will also generally stop when the calling R process closes (e.g. when RStudio is closed), but it is highly recommended to stop it manually to prevent hanging connections.</li>
<li>After closing all connections, a hanging connection may be indicated by the presence of “-shm” and “-wal” files in the project directory. Flushing these hanging connections is not required but is recommended.
<ul>
<li><p>If launching MSMatch with the compliance script, run [<code>close_up_shop()</code>] again.</p></li>
<li><p>Otherwise flush those connections by directly connecting and disconnecting with the DBI package:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="msqc-home.html#cb13-1" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbConnect</span>(<span class="fu">RSQLite</span>()<span class="sc">::</span>SQLite, <span class="st">&quot;nist_pfas_nta_dev.sqlite&quot;</span>)</span>
<span id="cb13-2"><a href="msqc-home.html#cb13-2" aria-hidden="true" tabindex="-1"></a>DBI<span class="sc">::</span><span class="fu">dbDisconnect</span>(con)</span></code></pre></div></li>
</ul></li>
</ul>
<p>Feature requests, suggestions, and bug reports are most conveniently submitted as issues via GitLab but may also be submitted by contacting the authors of this ROA. New functionality suggestions are encouraged as the project tooling develops. Likewise, if the functionality demonstrated here is of interest to projects outside of PFAS, this is only one example implementation of the underlying technology stack (i.e. DIMSpec); contact the authors to see if your mass spectrometry data would be amenable to that framework as other implementation suggestions are encouraged and a larger goal of the project to cohesively manage mass spectrometry data for non-targeted analysis within the Chemical Sciences Division.</p>
<p>This concludes the User Guide for the Mass Spectral Quality Control (MSQC) web application. The following section contains technical details about the implementation and user customization of this digital assistant.</p>
</div>
</div>
</div>
<div id="msqc-technical-details" class="section level2 unnumbered hasAnchor">
<h2>Technical Details<a href="msqc-home.html#msqc-technical-details" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Implementation and environment details for the MSQC application largely follow those for DIMSpec. See the sections on <a href="instructions.html#system-requirements">System Requirements</a>, <a href="technical-details.html#compute-environments">Environment Resolution</a>, <a href="technical-details.html#shiny-applications">Shiny Applications</a>, <a href="technical-details.html#plumber">Plumber</a> for the API implementation which is required for this application, and <a href="technical-details.html#python">Python Integration</a> for chemometrics support.</p>
<p>Technical details in this section will describe only the MSQC application found in the <code>inst/apps/msqc</code> directory and, unless otherwise noted, all files referred to hereafter refer to that directory.</p>
<div id="msqc-json-schema" class="section level3 unnumbered hasAnchor">
<h3>JSON Schema<a href="msqc-home.html#msqc-json-schema" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are two types of JavaScript Object Notation (JSON) files used for the data import and quality control process:</p>
<ol style="list-style-type: decimal">
<li><p><em>Sample JSON</em>: these files (conventionally labeled “[mzmlfilename]_mzml_sample.JSON”) are exported from the Non-Targeted Analysis – Method Reporting Tool (NTA-MRT) and contain sample, method, and compound information related to a paired mzML file. A visual representation of the Sample JSON schema is shown in Appendix A.</p></li>
<li><p><em>Peak JSON</em>: these files are exported from the MSQC application (conventionally labeled “[mzmlfilename]_mzml_cmpd[compoundreferencenumber].JSON”) and contain sample, method, compound information with mass spectral data related to the specified compound. The Peak JSON schema is shown in Appendix B.</p></li>
</ol>
</div>
<div id="msqc-quality-control-evaluation" class="section level3 unnumbered hasAnchor">
<h3>Quality Control Evaluation<a href="msqc-home.html#msqc-quality-control-evaluation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Upon running the quality control data processing there are seven individual checks that are performed. Within the MSQC app, the different checks are represented by parameter names. The QC checks with their named parameters are as follows. Most settings for these checks may be changed in the <a href="msqc-home.html#msqc-step0">QC Settings</a> page.</p>
<ul>
<li><p><em>measurederror</em>: is the reported precursor ion <em>m/z</em> value within the reported instrumental error of the calculated precursor ion <em>m/z</em> of the designated compound? This calculation uses the instrument relative mass error contained in Sample JSON file, the absolute minimum mass error (default: <strong>0.01 Da</strong> - see the setting labeled <em>Minimum m/z error of instrument</em>), and the monoisotopic mass of the designated compound in the DIMSpec database.</p></li>
<li><p><em>ms1_isotopepattern</em>: does the MS1 isotopic pattern of the submitted data match the calculated isotopic pattern with a match score above an expected value? This calculation uses the Minimum MS1 isotopic match score (default: <strong>0.5</strong> - see the setting labeled <em>Minimum MS1 isotopic match score</em>), the lower MS1 window value (default: <strong>1</strong> - see the setting labeled <em>Lower MS1 window value</em>), and the upper MS1 window value (default: <strong>4</strong> - see the setting labeled <em>Upper MS1 window value</em>).</p></li>
<li><p><em>ms1precursor_detected</em>: is the reported precursor ion <em>m/z</em> value present in the MS1 mass spectrum of the submitted data? This calculation uses the instrument relative mass error contained in Sample JSON file and the absolute minimum mass error (default: <strong>0.01 Da</strong> - see the setting labeled <em>Minimum m/z error of instrument</em>).</p></li>
<li><p><em>annfragments_detected</em>: are the reported annotated fragment ion <em>m/z</em> values present in the MS1 mass spectrum of the submitted data? This calculation uses the instrument relative mass error and annotated fragment ion list contained in Sample JSON file and the absolute minimum mass error (default: <strong>0.01 Da</strong> - see the setting labeled <em>Minimum m/z error of instrument</em>).</p></li>
<li><p><em>annfragment_accuracy</em>: are the reported annotated fragment ion <em>m/z</em> values value within the reported instrumental error of the fragment ion <em>m/z</em> of the designated fragment, calculated from the elemental formula? This calculation uses the instrument relative mass error and fragment elemental formulas contained in the Sample JSON file and the absolute minimum mass error (default: <strong>0.01 Da</strong> - see the setting labeled <em>Minimum m/z error of instrument</em>).</p></li>
<li><p><em>annfragments_subset</em>: are the reported annotated fragment elemental formulas a subset of the elemental formula of the designated compound? For example, is the fragment “C3F7” a subset of the designated compound elemental formula “C8F15O2H”? In this example, the result would be true. This calculation uses the elemental formula contained in the Sample JSON file and the elemental formula of the designated compound in the DIMSpec database.</p></li>
<li><p><em>annfragment_elementalmatch</em>: if there is a SMILES structure provided for an annotated fragment, does the elemental formula of the SMILES structure match the elemental formula provided for the same annotated fragment. This calculation uses the SMILES structure and the elemental formula contained in the Sample JSON file.</p></li>
<li><p><em>optimized_ums_parameters</em>: this is not a quality check, but occurs during the same data processing step. Optimized settings for the uncertainty mass spectrum of the MS1 and MS2 data is calculated using the function <a href="appendix-function-reference.html#fn_def_optimal_ums"><code>optimal_ums</code></a> for import into the DIMSpec database.</p></li>
</ul>
<p>At any time necessary, these settings may be changed on the <a href="msqc-home.html#msqc-step0">QC Settings</a> page and QC checks run again by clicking “Process Data”.</p>
</div>
<div id="msqc-application-settings" class="section level3 unnumbered hasAnchor">
<h3>Application Settings<a href="msqc-home.html#msqc-application-settings" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Many global application settings are customizable by modifying the <code>global.R</code> file. Changes to those listed here should not cause issues, but other settings in this file may result in instability. Anywhere a <code>TRUE</code> or <code>FALSE</code> value is indicated should only be <code>TRUE</code> or <code>FALSE.</code> The most germane user settings include:</p>
</div>
<div id="msqc-future" class="section level3 unnumbered hasAnchor">
<h3>Future Development<a href="msqc-home.html#msqc-future" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Both the R/Shiny and python code bases are fully extensible for future functionality needs, as is the underlying database infrastructure for custom tables and views. Future development may include deployment of and to a Shiny server to serve this as a hosted web application, extending the python code to analyze data of various formats from different instruments, and adding analysis features and functionality (e.g. high resolution plot generation and download or supporting the full workflow from instrument through import and to report generation) requested by stakeholders.</p>
<p>This concludes the technical details section for the Mass Spectral Quality Control (MSQC) application.</p>
</div>
</div>
<div id="msqc-conclusions" class="section level2 unnumbered hasAnchor">
<h2>Conclusions<a href="msqc-home.html#msqc-conclusions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The Mass Spectral Quality Control application provides a new way to make NTA tools developed at NIST on top of the Database Infrastructure for Mass Spectrometry accessible to both internal and external stakeholders. It is the first demonstration of tools that can be built on top of databases conforming to the <a href="intro-start.html#intro-start">DIMSpec project</a> which can be repurposed for any class of chemicals or project of interest.</p>
</div>
<div id="msqc-appendices" class="section level2 unnumbered hasAnchor">
<h2>Appendices<a href="msqc-home.html#msqc-appendices" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="msqc-appendix-a" class="section level3 unnumbered hasAnchor">
<h3>Example Sample JSON Schema<a href="msqc-home.html#msqc-appendix-a" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The javascript object notation (JSON) schema describing samples is minimal for flexibility and extensibility as it is produced by visual basic for applications (VBA) scripts in the <a href="msqc-home.html#msqc-ntamrt">Non Targeted Analysis Method Reporting Tool (NTA-MRT)</a>, and is not fully defined in a machine readability sense allowing for automatic schema verification.</p>
<p>This definition is intended only to facilitate transfer and assessment of data through the NTA-MRT into the DIMSpec schema, and sufficient for that purpose.</p>
<p>Any number of schema harmonization efforts could connect DIMSpec with larger schema development efforts within the community to increase machine readability and transferability in line with the FAIR principles. This is an area where the DIMSpec project can be improved and schema mapping efforts can serve to connect data with larger projects outside of this project. NIST welcomes collaborative efforts to harmonize schema with larger efforts; reach out with an <a href="mailto:pfas@nist.gov">email to the PFAS program at NIST</a> to start a collaboration.</p>
<pre><code>{
  &quot;sample&quot;: {
    &quot;name&quot;,
    &quot;description&quot;,
    &quot;sample_class&quot;,
    &quot;data_generator&quot;,
    &quot;source&quot;
  },
  &quot;chromatography&quot;: {
    &quot;ctype&quot;,
    &quot;cvendor&quot;,
    &quot;cmodel&quot;,
    &quot;ssolvent&quot;,
    &quot;mp1solvent&quot;,
    &quot;mp1add&quot;,
    &quot;m2solvent&quot;,
    &quot;mp2add&quot;,
    &quot;mp3solvent&quot;,
    &quot;mp3add&quot;,
    &quot;mp4solvent&quot;,
    &quot;mp4add&quot;,
    &quot;gcolvendor&quot;,
    &quot;gcolname&quot;,
    &quot;gcolchemistry&quot;,
    &quot;gcolid&quot;,
    &quot;gcollen&quot;,
    &quot;gcoldp&quot;,
    &quot;colvendor&quot;,
    &quot;colname&quot;,
    &quot;colchemistry&quot;,
    &quot;colid&quot;,
    &quot;collen&quot;,
    &quot;coldp&quot;,
    &quot;source&quot;
  },
  &quot;massspectrometry&quot;: {
    &quot;msvendor&quot;,
    &quot;msmodel&quot;,
    &quot;ionization&quot;,
    &quot;polarity&quot;,
    &quot;voltage&quot;,
    &quot;vunits&quot;,
    &quot;massanalyzer1&quot;,
    &quot;massanalyzer2&quot;,
    &quot;fragmode&quot;,
    &quot;ce_value&quot;,
    &quot;ce_desc&quot;,
    &quot;ce_units&quot;,
    &quot;ms2exp&quot;,
    &quot;isowidth&quot;,
    &quot;msaccuracy&quot;,
    &quot;ms1resolution&quot;,
    &quot;ms2resolution&quot;,
    &quot;source&quot;
  },
  &quot;qcmethod&quot;: [
    {
      &quot;name&quot;,
      &quot;value&quot;,
      &quot;source&quot;:
    }
  ],
  &quot;peaks&quot;: {
    &quot;peak&quot;: {
      &quot;count&quot;:,
      &quot;name&quot;,
      &quot;identifier&quot;,
      &quot;ionstate&quot;,
      &quot;mz&quot;,
      &quot;rt&quot;,
      &quot;peak_starttime&quot;,
      &quot;peak_endtime&quot;,
      &quot;confidence&quot;
    }
  },
  &quot;annotation&quot;: {
  &quot;compound&quot;: {
      &quot;name&quot;,
      &quot;fragment&quot;: {
          &quot;fragment_mz&quot;,
          &quot;fragment_formula&quot;,
          &quot;fragment_SMILES&quot;,
          &quot;fragment_radical&quot;,
          &quot;fragment_citation&quot;
          }
      }
  }
}</code></pre>
</div>
<div id="msqc-appendix-b" class="section level3 unnumbered hasAnchor">
<h3>Example Peak JSON Schema Extension<a href="msqc-home.html#msqc-appendix-b" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The javascript object notation (JSON) schema describing peak data and quality control metrics is a minimal extension of the <a href="msqc-home.html#msqc-appendix-a">sample schema</a> and is produced by the MSQC tool and associated R functions used as part of the QC evaluation process. It is not fully defined in a machine readability sense allowing for automatic schema verification.</p>
<p>MSQC uses this extension to split the provided sample schema by peak, maintaining the sample metadata, attach the “msdata” element containing anlytical results, and attach resulting QC data. This results in one file per peak for import into the DIMSpec schema, and is sufficient for that purpose.</p>
<p>Any number of future schema harmonization efforts could connect DIMSpec with larger schema development efforts within the community to increase machine reading and transferability in line with the FAIR principles. This is an area where the DIMSpec project can be improved and schema mapping efforts can serve to connect data with larger projects outside of this project. NIST welcomes collaborative efforts to harmonize schema with larger efforts; reach out with an <a href="mailto:pfas@nist.gov">email to the PFAS program at NIST</a> to start a collaboration.</p>
<pre><code>{
  ...,
  &quot;msdata&quot;: [
    {
      &quot;scantime&quot;,
      &quot;ms_n&quot;,
      &quot;baseion&quot;,
      &quot;base_int&quot;,
      &quot;measured_mz&quot;,
      &quot;measured_intensity&quot;
    }
  ],
  &quot;qc&quot;: [
    [
      {
        &quot;parameter&quot;,
        ...,
        &quot;value&quot;,
        &quot;limit&quot;,
        &quot;result&quot;
      }
    ]
  ]
}</code></pre>

</div>
</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-adusumilli_data_2017" class="csl-entry">
Adusumilli, Ravali and Mallick, Parag. 2017. <span>“Data <span>Conversion</span> with <span>ProteoWizard</span> <span class="nocase">msConvert</span>.”</span> <em>Methods in Molecular Biology (Clifton, N.J.)</em> 1550: 339–68. <a href="https://doi.org/10.1007/978-1-4939-6747-6_23">https://doi.org/10.1007/978-1-4939-6747-6_23</a>.
</div>
<div id="ref-R-shiny" class="csl-entry">
Chang, Winston, Joe Cheng, JJ Allaire, Carson Sievert, Barret Schloerke, Yihui Xie, Jeff Allen, Jonathan McPherson, Alan Dipert, and Barbara Borges. 2021. <em>Shiny: Web Application Framework for r</em>. <a href="https://shiny.rstudio.com/">https://shiny.rstudio.com/</a>.
</div>
<div id="ref-deutsch_mass_2010" class="csl-entry">
Deutsch, Eric W. 2010. <span>“Mass <span>Spectrometer</span> <span>Output</span> <span>File</span> <span>Format</span> <span class="nocase">mzML</span>.”</span> In <em>Proteome <span>Bioinformatics</span></em>, edited by Simon J. Hubbard and Andrew R. Jones, 319–31. Methods in <span>Molecular</span> <span>Biology</span>™. Totowa, NJ: Humana Press. <a href="https://doi.org/10.1007/978-1-60761-444-9_22">https://doi.org/10.1007/978-1-60761-444-9_22</a>.
</div>
<div id="ref-RStudio" class="csl-entry">
RStudio Team. 2020. <em>RStudio: Integrated Development Environment for r</em>. Boston, MA: RStudio, PBC. <a href="http://www.rstudio.com/">http://www.rstudio.com/</a>.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="4">
<li id="fn4"><p>Any mention of commercial products within NIST web pages is for information only; it does not imply recommendation or endorsement by NIST.<a href="msqc-home.html#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p>Requires R.exe is available in your system PATH<a href="msqc-home.html#fnref5" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="table-explorer-home.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="msmatch-home.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": null,
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["DIMSPec_User_Guide.epub", "DIMSpec User Guide (epub)"], ["DIMSpec_User_Guide.pdf", "DIMSpec User Guide (pdf)"], ["quick_install.pdf", "Quick Guide - Installation"], ["file_convert.pdf", "Quick Guide - Conversion to mzML"], ["quick_plumber.pdf", "Quick Guide - API"], ["quick_apps.pdf", "Quick Guide - Web Apps"], ["quick_import.pdf", "Quick Guide - Importing Data"], ["quick_advanced.pdf", "Quick Guide - Advanced Use and Development"]],
"search": {
"engine": "fuse",
"options": null,
"isCaseSensitive": false,
"threshold": 0,
"distance": 0
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
