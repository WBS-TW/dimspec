<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Resolve and store mass spectral data during import</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R-help.css" />
</head><body>

<table width="100%" summary="page for resolve_ms_data"><tr><td>resolve_ms_data</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Resolve and store mass spectral data during import</h2>

<h3>Description</h3>

<p>Use peak IDs generated by the import workflow to assign and store mass
spectral data (if coming from the NIST NTA Method Reporting Tool, these will
all be in the &quot;separated&quot; format). Optionally also calls [resolve_ms_spectra]
if unpack_spectra = TRUE. Mass spectral data are stored in either one
(&quot;zipped&quot;)
</p>


<h3>Usage</h3>

<pre>
resolve_ms_data(
  obj,
  peak_id = NULL,
  peaks_table = "peaks",
  ms_data_in = "msdata",
  ms_data_table = "ms_data",
  unpack_spectra = FALSE,
  ms_spectra_table = "ms_spectra",
  unpack_format = c("separated", "zipped"),
  as_object = FALSE,
  import_map = IMPORT_MAP,
  db_conn = con,
  log_ns = "db"
)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>obj</code></td>
<td>
<p>LIST object containing data formatted from the import generator</p>
</td></tr>
<tr valign="top"><td><code>peak_id</code></td>
<td>
<p>INT scalar of the peak ID in question, which must be present</p>
</td></tr>
<tr valign="top"><td><code>peaks_table</code></td>
<td>
<p>CHR scalar name of the peaks table in the database
(default: &quot;peaks&quot;)</p>
</td></tr>
<tr valign="top"><td><code>ms_data_in</code></td>
<td>
<p>CHR scalar of the named component of 'obj' holding mass
spectral data (default: &quot;msdata&quot;)</p>
</td></tr>
<tr valign="top"><td><code>ms_data_table</code></td>
<td>
<p>CHR scalar name of the table holding packed spectra in
the database (default: &quot;ms_data&quot;)</p>
</td></tr>
<tr valign="top"><td><code>unpack_spectra</code></td>
<td>
<p>LGL scalar indicating whether or not to unpack spectral
data to a long format (i.e. all masses and intensities will become a single
record) in the table defined by 'ms_spectra_table' (default: FALSE)</p>
</td></tr>
<tr valign="top"><td><code>ms_spectra_table</code></td>
<td>
<p>CHR scalar name of the table holding long form
spectra in the database (default: &quot;ms_spectra&quot;)</p>
</td></tr>
<tr valign="top"><td><code>unpack_format</code></td>
<td>
<p>CHR scalar of the type of data packing for the spectra,
one of &quot;separated&quot; (default) or &quot;zipped&quot;</p>
</td></tr>
<tr valign="top"><td><code>as_object</code></td>
<td>
<p>LGL scalar indicating whether or not to return the result to
the session as an object (TRUE) or to add it to the database (default:
FALSE)</p>
</td></tr>
<tr valign="top"><td><code>import_map</code></td>
<td>
<p>data.frame object of the import map (e.g. from a CSV)</p>
</td></tr>
<tr valign="top"><td><code>db_conn</code></td>
<td>
<p>connection object (default: con)</p>
</td></tr>
<tr valign="top"><td><code>log_ns</code></td>
<td>
<p>CHR scalar of the logging namespace to use (default: &quot;db&quot;)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If 'as_object' == TRUE, a data.frame object containing either packed
(if 'unpack_spectra' == FALSE) or unpacked (if 'unpack_spectra' == TRUE)
spectra, otherwise adds spectra to the database
</p>


<h3>Note</h3>

<p>This function is called as part of [full_import()] during the call to
[resolve_peaks]
</p>


</body></html>
